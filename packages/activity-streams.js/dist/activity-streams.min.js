/* activity-streams.js v0.1.0 | (c) 2012-2014 Nick Jennings | License: MIT | https://github.com/silverbucket/activity-streams.js */
(function(w,undefined){var scope={};!function(t,i){"object"==typeof module&&"object"==typeof module.exports?module.exports=i(t.document?t:{}):i(t)}("undefined"!=typeof window?window:this,function(t,i){function e(t){"object"!=typeof t&&(t={}),this.identifier=t.identifier||"id",this.idx=[]}return e.prototype.getIdentifiers=function(){for(var t=[],i=this.idx.length-1;i>=0;i--)t.push(this.idx[i][this.identifier]);return t},e.prototype.getRecord=function(t){for(var e=this.idx.length-1;e>=0;e--)if(""+this.idx[e][this.identifier]==""+t)return this.idx[e];return i},e.prototype.addRecord=function(t){if("object"!=typeof t)throw new Error("cannot add non-object records.");if(!t[this.identifier])throw new Error("cannot add a record with no `"+this.identifier+"` property specified.");return this.removeRecord(t[this.identifier]),this.idx.push(t),!0},e.prototype.removeRecord=function(t){for(var i=this.idx.length-1;i>=0;i--)if(""+this.idx[i][this.identifier]==""+t)return this.idx.splice(i,1),!0;return!1},e.prototype.forEachRecord=function(t){for(var i=this.idx.length-1;i>=0;i--)t(this.idx[i])},e.prototype.getCount=function(){return this.idx.length},"function"==typeof define&&define.amd&&define([],function(){return e}),t.ArrayKeys=e,e});!function(e,t){if("object"==typeof module&&"object"==typeof module.exports){var r=require("array-keys"),n=require("wolfy87-eventemitter");module.exports=e.document?t(e,r,n):t({},r,n)}else{if(!e.ArrayKeys)throw new Error("activity-streams.js depends on the ArrayKeys module.");if(!e.EventEmitter)throw new Error("activity-streams.js depends on the EventEmitter module.");t(e,e.ArrayKeys,e.EventEmitter)}}("undefined"!=typeof window?window:this,function(e,t,r){var n=new t({identifier:"id"}),i=new t({identifier:"id"});ee=new r;var o={create:function(e){var t=!1;try{t=n.addRecord(e)}catch(r){throw new Error(r)}t&&ee.emitEvent("activity-stream-create",e)},"delete":function(e){var t=n.removeRecord(e);t&&ee.emitEvent("activity-stream-delete",e)},get:function(e){return n.getRecord(e)}},c={create:function(e){var t=!1;try{t=i.addRecord(e)}catch(r){throw new Error(r)}t&&ee.emitEvent("activity-object-create",e)},"delete":function(e){var t=i.removeRecord(e);t&&ee.emitEvent("activity-object-delete",e)},get:function(e){return i.getRecord(e)}};return"function"==typeof define&&define.amd&&define([],function(){return Activity}),e.Activity={Stream:o,Object:c,on:ee.on,once:ee.once,off:ee.off},e.Activity});w.Activity=scope.Activity;})(window);
