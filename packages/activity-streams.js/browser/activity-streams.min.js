!function(e){if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define(e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.Activity=e()}}(function(){var e;return function t(e,n,r){function i(s,f){if(!n[s]){if(!e[s]){var u="function"==typeof require&&require;if(!f&&u)return u(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+s+"'")}var c=n[s]={exports:{}};e[s][0].call(c.exports,function(t){var n=e[s][1][t];return i(n?n:t)},c,c.exports,t,e,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,t){var n=e("wolfy87-eventemitter"),r=e("array-keys"),i=new r({identifier:"id"}),o=new r({identifier:"id"});ee=new n;var s={create:function(e){var t=!1;try{t=i.addRecord(e)}catch(n){throw new Error(n)}return t&&ee.emitEvent("activity-stream-create",e),t},"delete":function(e){var t=i.removeRecord(e);return t&&ee.emitEvent("activity-stream-delete",e),t},get:function(e){return i.getRecord(e)}},f={create:function(e){var t=!1;try{t=o.addRecord(e)}catch(n){throw new Error(n)}return t&&ee.emitEvent("activity-object-create",e),t},"delete":function(e){var t=o.removeRecord(e);return t&&ee.emitEvent("activity-object-delete",e),t},get:function(e){return o.getRecord(e)}};t.exports={Stream:s,Object:f,on:ee.on,once:ee.once,off:ee.off}},{"array-keys":2,"wolfy87-eventemitter":3}],2:[function(t,n){!function(e,t){"object"==typeof n&&"object"==typeof n.exports?n.exports=t(e.document?e:{}):t(e)}("undefined"!=typeof window?window:this,function(t,n){function r(e){"object"!=typeof e&&(e={}),this.identifier=e.identifier||"id",this.idx=[]}return r.prototype.getIdentifiers=function(){for(var e=[],t=this.idx.length-1;t>=0;t--)e.push(this.idx[t][this.identifier]);return e},r.prototype.getRecord=function(e){for(var t=this.idx.length-1;t>=0;t--)if(""+this.idx[t][this.identifier]==""+e)return this.idx[t];return n},r.prototype.addRecord=function(e){if("object"!=typeof e)throw new Error("cannot add non-object records.");if(!e[this.identifier])throw new Error("cannot add a record with no `"+this.identifier+"` property specified.");return this.removeRecord(e[this.identifier]),this.idx.push(e),!0},r.prototype.removeRecord=function(e){for(var t=this.idx.length-1;t>=0;t--)if(""+this.idx[t][this.identifier]==""+e)return this.idx.splice(t,1),!0;return!1},r.prototype.forEachRecord=function(e){for(var t=this.idx.length-1;t>=0;t--)e(this.idx[t])},r.prototype.getCount=function(){return this.idx.length},"function"==typeof e&&e.amd&&e([],function(){return r}),t.ArrayKeys=r,r})},{}],3:[function(t,n){(function(){"use strict";function t(){}function r(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function i(e){return function(){return this[e].apply(this,arguments)}}var o=t.prototype,s=this,f=s.EventEmitter;o.getListeners=function(e){var t,n,r=this._getEvents();if(e instanceof RegExp){t={};for(n in r)r.hasOwnProperty(n)&&e.test(n)&&(t[n]=r[n])}else t=r[e]||(r[e]=[]);return t},o.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},o.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&(t={},t[e]=n),t||n},o.addListener=function(e,t){var n,i=this.getListenersAsObject(e),o="object"==typeof t;for(n in i)i.hasOwnProperty(n)&&-1===r(i[n],t)&&i[n].push(o?t:{listener:t,once:!1});return this},o.on=i("addListener"),o.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},o.once=i("addOnceListener"),o.defineEvent=function(e){return this.getListeners(e),this},o.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},o.removeListener=function(e,t){var n,i,o=this.getListenersAsObject(e);for(i in o)o.hasOwnProperty(i)&&(n=r(o[i],t),-1!==n&&o[i].splice(n,1));return this},o.off=i("removeListener"),o.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},o.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},o.manipulateListeners=function(e,t,n){var r,i,o=e?this.removeListener:this.addListener,s=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(r=n.length;r--;)o.call(this,t,n[r]);else for(r in t)t.hasOwnProperty(r)&&(i=t[r])&&("function"==typeof i?o.call(this,r,i):s.call(this,r,i));return this},o.removeEvent=function(e){var t,n=typeof e,r=this._getEvents();if("string"===n)delete r[e];else if(e instanceof RegExp)for(t in r)r.hasOwnProperty(t)&&e.test(t)&&delete r[t];else delete this._events;return this},o.removeAllListeners=i("removeEvent"),o.emitEvent=function(e,t){var n,r,i,o,s=this.getListenersAsObject(e);for(i in s)if(s.hasOwnProperty(i))for(r=s[i].length;r--;)n=s[i][r],n.once===!0&&this.removeListener(e,n.listener),o=n.listener.apply(this,t||[]),o===this._getOnceReturnValue()&&this.removeListener(e,n.listener);return this},o.trigger=i("emitEvent"),o.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},o.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},o._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},o._getEvents=function(){return this._events||(this._events={})},t.noConflict=function(){return s.EventEmitter=f,t},"function"==typeof e&&e.amd?e(function(){return t}):"object"==typeof n&&n.exports?n.exports=t:s.EventEmitter=t}).call(this)},{}]},{},[1])(1)});