!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.ActivityStreams=t()}}(function(){return function t(e,n,i){function r(s,c){if(!n[s]){if(!e[s]){var u="function"==typeof require&&require;if(!c&&u)return u(s,!0);if(o)return o(s,!0);var f=new Error("Cannot find module '"+s+"'");throw f.code="MODULE_NOT_FOUND",f}var a=n[s]={exports:{}};e[s][0].call(a.exports,function(t){var n=e[s][1][t];return r(n?n:t)},a,a.exports,t,e,n,i)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(t,e,n){var i=t("event-emitter"),r=t("array-keys"),o=new r({identifier:"id"}),s=i(),c=["actor","object","target"],u=function(t){var e,n={};for(var i in t)if("string"==typeof t[i])n[i]=o.getRecord(t[i])||t[i];else if(Array.isArray(t[i]))for(n[i]=[],e=t[i].length-1;e>=0;e-=1)"string"==typeof t[i][e]&&(n[i][e]=o.getRecord(t[i][e])||t[i][e]);else n[i]=t[i];for(e=c.length-1;e>=0;e-=1)"string"==typeof n[c[e]]&&(n[c[e]]={id:n[c[e]]});return s.emit("activity-stream",n),n},f={create:function(t){var e=!1;try{e=o.addRecord(t)}catch(n){throw new Error(n)}return e&&s.emit("activity-object-create",t),e},"delete":function(t){var e=o.removeRecord(t);return e&&s.emit("activity-object-delete",t),e},get:function(t){var e=o.getRecord(t);return e?e:t},list:function(){return o.getIdentifiers()},getByType:function(t){o.forEach(function(t){})}};e.exports={Stream:u,Object:f,on:function(t,e){return s.on(t,e)},once:function(t,e){return s.once(t,e)},off:function(t,e){return s.off(t,e)}}},{"array-keys":2,"event-emitter":4}],2:[function(t,e,n){function i(t){"object"!=typeof t&&(t={}),this._identifier=t.identifier||"id",this._store=[],this._idx=[],t.emitEvents?(this._emitEvents=!0,this.events=new r):this._emitEvents=!1}var r=t("tiny-emitter");i.prototype.emitEvent=function(t,e,n){this._emitEvents&&!n&&this.events.emit(t,e)},i.prototype.getIdentifiers=function(){for(var t=[],e=this._store.length-1;e>=0;e-=1)t[t.length]=this._store[e][this._identifier];return t},i.prototype.getRecord=function(t){for(var e=this._store.length-1;e>=0;e-=1)if(this._store[e][this._identifier]===t)return this._store[e];return void 0},i.prototype.exists=function(t){return this.getIndex(t)>=0?!0:!1},i.prototype.getIndex=function(t){for(var e=this._idx.length-1;e>=0;e-=1)if(this._idx[e]===t)return e;return-1},i.prototype.addRecord=function(t){if("object"!=typeof t)throw new Error("cannot add non-object records.");if(!t[this._identifier])throw new Error("cannot add a record with no `"+this._identifier+"` property specified.");var e=this.removeRecord(t[this._identifier],!0);return this._idx[this._idx.length]=t[this._identifier],this._store[this._store.length]=t,setTimeout(function(){e?setTimeout(this.emitEvent.bind(this,"update",t),0):setTimeout(this.emitEvent.bind(this,"add",t),0)}.bind(this),0),!0},i.prototype.removeRecord=function(t,e){var n=this.getIndex(t);if(0>n)return!1;for(var i=n;i>=0;i-=1)if(this._store[i][this._identifier]===t)return this._store.splice(i,1),this._idx.splice(n,1),setTimeout(this.emitEvent.bind(this,"remove",t,e),0),!0;for(var r=this._store.length-1;r!==n;r-=1)if(this._store[r][this._identifier]===t)return this._store.splice(r,1),this._idx.splice(n,1),setTimeout(this.emitEvent.bind(this,"remove",t,e),0),!0;return!1},i.prototype.forEachRecord=function(t){var e=0,n=this,i=function(){};return setTimeout(function(){for(var r=n._store.length-1;r>=0;r-=1)e+=1,setTimeout(t(n._store[r]),0);setTimeout(i(e),0)},0),{"finally":function(t){i=t}}},i.prototype.getCount=function(){return this._store.length},e.exports=i},{"tiny-emitter":3}],3:[function(t,e,n){function i(){}i.prototype={on:function(t,e,n){var i=this.e||(this.e={});return(i[t]||(i[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){var i=this,r=function(){i.off(t,r),e.apply(n,arguments)};return this.on(t,r,n)},emit:function(t){var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),i=0,r=n.length;for(i;r>i;i++)n[i].fn.apply(n[i].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),i=n[t],r=[];if(i&&e)for(var o=0,s=i.length;s>o;o++)i[o].fn!==e&&r.push(i[o]);return r.length?n[t]=r:delete n[t],this}},e.exports=i},{}],4:[function(t,e,n){"use strict";var i,r,o,s,c,u,f,a=t("d"),l=t("es5-ext/object/valid-callable"),h=Function.prototype.apply,p=Function.prototype.call,d=Object.create,m=Object.defineProperty,v=Object.defineProperties,y=Object.prototype.hasOwnProperty,_={configurable:!0,enumerable:!1,writable:!0};i=function(t,e){var n;return l(e),y.call(this,"__ee__")?n=this.__ee__:(n=_.value=d(null),m(this,"__ee__",_),_.value=null),n[t]?"object"==typeof n[t]?n[t].push(e):n[t]=[n[t],e]:n[t]=e,this},r=function(t,e){var n,r;return l(e),r=this,i.call(this,t,n=function(){o.call(r,t,n),h.call(e,this,arguments)}),n.__eeOnceListener__=e,this},o=function(t,e){var n,i,r,o;if(l(e),!y.call(this,"__ee__"))return this;if(n=this.__ee__,!n[t])return this;if(i=n[t],"object"==typeof i)for(o=0;r=i[o];++o)(r===e||r.__eeOnceListener__===e)&&(2===i.length?n[t]=i[o?0:1]:i.splice(o,1));else(i===e||i.__eeOnceListener__===e)&&delete n[t];return this},s=function(t){var e,n,i,r,o;if(y.call(this,"__ee__")&&(r=this.__ee__[t]))if("object"==typeof r){for(n=arguments.length,o=new Array(n-1),e=1;n>e;++e)o[e-1]=arguments[e];for(r=r.slice(),e=0;i=r[e];++e)h.call(i,this,o)}else switch(arguments.length){case 1:p.call(r,this);break;case 2:p.call(r,this,arguments[1]);break;case 3:p.call(r,this,arguments[1],arguments[2]);break;default:for(n=arguments.length,o=new Array(n-1),e=1;n>e;++e)o[e-1]=arguments[e];h.call(r,this,o)}},c={on:i,once:r,off:o,emit:s},u={on:a(i),once:a(r),off:a(o),emit:a(s)},f=v({},u),e.exports=n=function(t){return null==t?d(f):v(Object(t),u)},n.methods=c},{d:5,"es5-ext/object/valid-callable":14}],5:[function(t,e,n){"use strict";var i,r=t("es5-ext/object/assign"),o=t("es5-ext/object/normalize-options"),s=t("es5-ext/object/is-callable"),c=t("es5-ext/string/#/contains");i=e.exports=function(t,e){var n,i,s,u,f;return arguments.length<2||"string"!=typeof t?(u=e,e=t,t=null):u=arguments[2],null==t?(n=s=!0,i=!1):(n=c.call(t,"c"),i=c.call(t,"e"),s=c.call(t,"w")),f={value:e,configurable:n,enumerable:i,writable:s},u?r(o(u),f):f},i.gs=function(t,e,n){var i,u,f,a;return"string"!=typeof t?(f=n,n=e,e=t,t=null):f=arguments[3],null==e?e=void 0:s(e)?null==n?n=void 0:s(n)||(f=n,n=void 0):(f=e,e=n=void 0),null==t?(i=!0,u=!1):(i=c.call(t,"c"),u=c.call(t,"e")),a={get:e,set:n,configurable:i,enumerable:u},f?r(o(f),a):a}},{"es5-ext/object/assign":6,"es5-ext/object/is-callable":9,"es5-ext/object/normalize-options":13,"es5-ext/string/#/contains":16}],6:[function(t,e,n){"use strict";e.exports=t("./is-implemented")()?Object.assign:t("./shim")},{"./is-implemented":7,"./shim":8}],7:[function(t,e,n){"use strict";e.exports=function(){var t,e=Object.assign;return"function"!=typeof e?!1:(t={foo:"raz"},e(t,{bar:"dwa"},{trzy:"trzy"}),t.foo+t.bar+t.trzy==="razdwatrzy")}},{}],8:[function(t,e,n){"use strict";var i=t("../keys"),r=t("../valid-value"),o=Math.max;e.exports=function(t,e){var n,s,c,u=o(arguments.length,2);for(t=Object(r(t)),c=function(i){try{t[i]=e[i]}catch(r){n||(n=r)}},s=1;u>s;++s)e=arguments[s],i(e).forEach(c);if(void 0!==n)throw n;return t}},{"../keys":10,"../valid-value":15}],9:[function(t,e,n){"use strict";e.exports=function(t){return"function"==typeof t}},{}],10:[function(t,e,n){"use strict";e.exports=t("./is-implemented")()?Object.keys:t("./shim")},{"./is-implemented":11,"./shim":12}],11:[function(t,e,n){"use strict";e.exports=function(){try{return Object.keys("primitive"),!0}catch(t){return!1}}},{}],12:[function(t,e,n){"use strict";var i=Object.keys;e.exports=function(t){return i(null==t?t:Object(t))}},{}],13:[function(t,e,n){"use strict";var i=Array.prototype.forEach,r=Object.create,o=function(t,e){var n;for(n in t)e[n]=t[n]};e.exports=function(t){var e=r(null);return i.call(arguments,function(t){null!=t&&o(Object(t),e)}),e}},{}],14:[function(t,e,n){"use strict";e.exports=function(t){if("function"!=typeof t)throw new TypeError(t+" is not a function");return t}},{}],15:[function(t,e,n){"use strict";e.exports=function(t){if(null==t)throw new TypeError("Cannot use null or undefined");return t}},{}],16:[function(t,e,n){"use strict";e.exports=t("./is-implemented")()?String.prototype.contains:t("./shim")},{"./is-implemented":17,"./shim":18}],17:[function(t,e,n){"use strict";var i="razdwatrzy";e.exports=function(){return"function"!=typeof i.contains?!1:i.contains("dwa")===!0&&i.contains("foo")===!1}},{}],18:[function(t,e,n){"use strict";var i=String.prototype.indexOf;e.exports=function(t){return i.call(this,t,arguments[1])>-1}},{}]},{},[1])(1)});